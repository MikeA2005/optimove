import{W as f,r as u,j as e}from"./app-BJ3LYwhR.js";import{D as r,a as N,b as y,B as E}from"./ToggleSwitch-Cac-iS3i.js";import{I as m}from"./InputError-4CZTqiue.js";import{C}from"./CustomDatepicker-KOevqwzL.js";function w({isOpen:d,onClose:o,loan:s=null,employees:p}){const l=s!==null,{data:t,setData:n,post:c,put:h,processing:x,errors:i,reset:g}=f({date:"",employee_id:"",amount:"",installments:"",installment_value:"",pending_amount:""});u.useEffect(()=>{s&&l&&n({date:s.date||"",employee_id:s.employee.id||"",amount:s.amount||"",installments:s.installments||"",installment_value:s.installment_value||"",pending_amount:s.pending_amount||""})},[s]),u.useEffect(()=>{if(t.amount&&t.installments){const a=parseFloat(t.amount)/parseInt(t.installments);n({...t,installment_value:a,pending_amount:t.amount})}else n({...t,installment_value:"",pending_amount:""})},[t.amount,t.installments]);const j=a=>{a.preventDefault();const v=l?h:c,_=l?route("loans.update",s.id):route("loans.store");v(_,{onSuccess:()=>{g(),o()},onError:b=>{console.error("Error handling employee: ",b)}})};return e.jsxs(r,{open:d,onClose:o,position:"right",children:[e.jsx(r.Header,{title:l?"Editar préstamo":"Agregar préstamo",titleIcon:l?N:y}),e.jsx(r.Items,{children:e.jsxs("form",{onSubmit:j,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date",className:"label",children:"Fecha de préstamo"}),e.jsx(C,{id:"date",value:t.date,onChange:a=>n("date",a)}),e.jsx(m,{message:i.date})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"employee_id",className:"label",children:"Empleado"}),e.jsxs("select",{id:"employee_id",value:t.employee_id,onChange:a=>n("employee_id",a.target.value),className:"input",children:[e.jsx("option",{value:"",disabled:!0,children:"Selecciona un empleado"}),p.data.map(a=>e.jsx("option",{value:a.id,children:a.first_name+" "+a.last_name},a.id))]}),e.jsx(m,{message:i.employee_id})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"amount",className:"label",children:"Monto de préstamo"}),e.jsx("input",{type:"number",id:"amount",value:t.amount,onChange:a=>n("amount",a.target.value),className:"input"}),e.jsx(m,{message:i.amount})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"installments",className:"label",children:"Cuotas"}),e.jsx("input",{type:"number",id:"installments",value:t.installments,onChange:a=>n("installments",a.target.value),className:"input"}),e.jsx(m,{message:i.installments})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"installment_value",className:"label",children:"Valor de la cuota"}),e.jsx("input",{type:"number",id:"installment_value",value:t.installment_value,onChange:a=>n("installment_value",a.target.value),disabled:!0,className:"input"}),e.jsx(m,{message:i.installment_value})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pending_amount",className:"label",children:"Monto pendiente por pagar"}),e.jsx("input",{type:"number",id:"pending_amount",value:t.pending_amount,onChange:a=>n("pending_amount",a.target.value),disabled:!0,className:"input"}),e.jsx(m,{message:i.pending_amount})]})]}),e.jsx(E,{type:"submit",disabled:x,color:"blue",className:"mt-4 w-full text-base font-medium",children:l?"Editar préstamo":"Agregar préstamo"})]})})]})}export{w as default};
