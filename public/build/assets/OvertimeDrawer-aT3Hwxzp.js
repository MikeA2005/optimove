import{W as y,r as m,j as e}from"./app-BJ3LYwhR.js";import{D as n,a as E,b as N,B as F}from"./ToggleSwitch-Cac-iS3i.js";import{I as o}from"./InputError-4CZTqiue.js";import{C as D}from"./CustomDatepicker-KOevqwzL.js";function w({isOpen:u,onClose:d,overtime:s=null,employees:c,overtimeTypes:p}){const i=s!==null,{data:t,setData:l,post:h,put:x,processing:_,errors:r,reset:j}=y({date:"",employee_id:"",overtime_type_id:"",hours:""});m.useEffect(()=>{s&&i&&l({date:s.date||"",employee_id:s.employee.id||"",overtime_type_id:s.overtime_type.id||"",hours:s.hours||""})},[s]),m.useEffect(()=>{if(t.amount&&t.installments){const a=parseFloat(t.amount)/parseInt(t.installments);l({...t,installment_value:a.toFixed(2),pending_amount:t.amount})}else l({...t,installment_value:"",pending_amount:""})},[t.amount,t.installments]);const v=a=>{a.preventDefault();const g=i?x:h,f=i?route("overtimes.update",s.id):route("overtimes.store");g(f,{onSuccess:()=>{d(),j()},onError:b=>{console.log("Error handling overtime",b)}})};return e.jsxs(n,{open:u,onClose:d,position:"right",children:[e.jsx(n.Header,{title:i?"Editar hora extra":"Agregar hora extra",titleIcon:i?E:N}),e.jsx(n.Items,{children:e.jsxs("form",{onSubmit:v,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date",className:"label",children:"Fecha de Hora Extra"}),e.jsx(D,{id:"date",value:t.date,onChange:a=>l("date",a)}),e.jsx(o,{message:r.date})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"employee_id",className:"label",children:"Empleado"}),e.jsxs("select",{id:"employee_id",value:t.employee_id,onChange:a=>l("employee_id",a.target.value),className:"input",children:[e.jsx("option",{value:"",children:"Seleccionar empleado..."}),c.data.map(a=>e.jsxs("option",{value:a.id,children:[a.first_name," ",a.last_name]},a.id))]}),e.jsx(o,{message:r.employee_id})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"overtime_type_id",className:"label",children:"Tipo de Hora Extra"}),e.jsxs("select",{id:"overtime_type_id",value:t.overtime_type_id,onChange:a=>l("overtime_type_id",a.target.value),className:"input",children:[e.jsx("option",{value:"",children:"Seleccionar tipo..."}),p.data.map(a=>e.jsx("option",{value:a.id,children:a.type_name},a.id))]}),e.jsx(o,{message:r.overtime_type_id})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"hours",className:"label",children:"Horas"}),e.jsx("input",{id:"hours",value:t.hours,onChange:a=>l("hours",a.target.value),className:"input"}),e.jsx(o,{message:r.hours})]})]}),e.jsx(F,{type:"submit",disabled:_,color:"blue",className:"mt-4 w-full text-base font-medium",children:i?"Editar hora extra":"Agregar hora extra"})]})})]})}export{w as default};
