import{W as f,r as m,j as e}from"./app-DK9Td1gN.js";import{D as d,a as N,b as y,B as E}from"./ToggleSwitch-BEsFegO1.js";import{I as i}from"./InputError-BpmO9yAk.js";import{C}from"./CustomDatepicker-CxbDm65z.js";function A({isOpen:u,onClose:r,loan:n=null,employees:c}){const o=n!==null,{data:a,setData:s,post:p,put:h,processing:x,errors:l,reset:j}=f({date:"",employee_id:"",amount:"",installments:"",installment_value:"",pending_amount:"",deduction_period:"both"});m.useEffect(()=>{n&&o&&s({date:n.date||"",employee_id:n.employee.id||"",amount:n.amount||"",installments:n.installments||"",installment_value:n.installment_value||"",pending_amount:n.pending_amount||"",deduction_period:n.deduction_period||"both"})},[n]),m.useEffect(()=>{if(a.amount&&a.installments){const t=parseFloat(a.amount)/parseInt(a.installments);s({...a,installment_value:t,pending_amount:a.amount})}else s({...a,installment_value:"",pending_amount:""})},[a.amount,a.installments]);const g=t=>{t.preventDefault();const v=o?h:p,_=o?route("loans.update",n.id):route("loans.store");v(_,{onSuccess:()=>{j(),r()},onError:b=>{console.error("Error handling employee: ",b)}})};return e.jsxs(d,{open:u,onClose:r,position:"right",children:[e.jsx(d.Header,{title:o?"Editar préstamo":"Agregar préstamo",titleIcon:o?N:y}),e.jsx(d.Items,{children:e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"date",className:"label",children:"Fecha de préstamo"}),e.jsx(C,{id:"date",value:a.date,onChange:t=>s("date",t)}),e.jsx(i,{message:l.date})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"employee_id",className:"label",children:"Empleado"}),e.jsxs("select",{id:"employee_id",value:a.employee_id,onChange:t=>s("employee_id",t.target.value),className:"input",children:[e.jsx("option",{value:"",disabled:!0,children:"Selecciona un empleado"}),c.data.map(t=>e.jsx("option",{value:t.id,children:t.first_name+" "+t.last_name},t.id))]}),e.jsx(i,{message:l.employee_id})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"amount",className:"label",children:"Monto de préstamo"}),e.jsx("input",{type:"number",id:"amount",value:a.amount,onChange:t=>s("amount",t.target.value),className:"input"}),e.jsx(i,{message:l.amount})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"installments",className:"label",children:"Cuotas"}),e.jsx("input",{type:"number",id:"installments",value:a.installments,onChange:t=>s("installments",t.target.value),className:"input"}),e.jsx(i,{message:l.installments})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"installment_value",className:"label",children:"Valor de la cuota"}),e.jsx("input",{type:"number",id:"installment_value",value:a.installment_value,onChange:t=>s("installment_value",t.target.value),disabled:!0,className:"input"}),e.jsx(i,{message:l.installment_value})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"pending_amount",className:"label",children:"Monto pendiente por pagar"}),e.jsx("input",{type:"number",id:"pending_amount",value:a.pending_amount,onChange:t=>s("pending_amount",t.target.value),disabled:!0,className:"input"}),e.jsx(i,{message:l.pending_amount})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"deduction_period",className:"label",children:"Periodo de descuento"}),e.jsxs("select",{id:"deduction_period",value:a.deduction_period,onChange:t=>s("deduction_period",t.target.value),className:"input",children:[e.jsx("option",{value:"first",children:"Primera quincena"}),e.jsx("option",{value:"second",children:"Segunda quincena"}),e.jsx("option",{value:"both",children:"Ambas"})]}),e.jsx(i,{message:l.deduction_period})]})]}),e.jsx(E,{type:"submit",disabled:x,color:"blue",className:"mt-4 w-full text-base font-medium",children:o?"Editar préstamo":"Agregar préstamo"})]})})]})}export{A as default};
